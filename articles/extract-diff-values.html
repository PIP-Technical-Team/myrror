<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extract Different Values â€¢ myrror</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract Different Values">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">myrror</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/myrror.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/extract-diff-values.html">Extract Different Values</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract Different Values</h1>
            
      

      <div class="d-none name"><code>extract-diff-values.Rmd</code></div>
    </div>

    
    
<p>This article looks at a series of workflows for the function
<code><a href="../reference/extract_diff_values.html">extract_diff_values()</a></code>.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>At its core, this function does the following:</p>
<ol style="list-style-type: decimal">
<li>Sets up the two data frames (<code>dfx</code> and <code>dfy</code>)
for comparison:
<ul>
<li>Pairs rows based on the keys provided (given by the user using the
<code>by</code> , <code>by.x</code>, <code>by.y</code> arguments, or by
row number).</li>
<li>Pairs columns based on the column names.</li>
</ul>
</li>
<li>Runs the comparison between shared rows and shared columns
only.</li>
<li>Returns a list of <code>data.table</code>s, one per variable, with
the values of a given variable in <code>dfx</code> and <code>dfy</code>
side-by-side.</li>
</ol>
</div>
<div class="section level2">
<h2 id="example-1-one-variable-with-differences-">Example 1: one variable with differences.<a class="anchor" aria-label="anchor" href="#example-1-one-variable-with-differences-"></a>
</h2>
<p>If you run the function with arguments <code>output = "full"</code>
the console will print a user-friendly summary of the comparison,
similar to the output of <code><a href="../reference/myrror.html">myrror()</a></code>, but displaying only the
output of <code><a href="../reference/extract_diff_values.html">extract_diff_values()</a></code></p>
<p><img src="images/extract_diff_values_basic.gif"></p>
<p>When run in default mode, with <code>output = "simple"</code> ,
<code><a href="../reference/extract_diff_values.html">extract_diff_values()</a></code> returns a list of
<code>data.table</code>s:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_diff_values.html">extract_diff_values</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">iris_var1</span>, output <span class="op">=</span> <span class="st">"simple"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Sepal.Length</span></span>
<span><span class="co">#&gt;           diff indexes     rn Sepal.Length.x Sepal.Length.y</span></span>
<span><span class="co">#&gt;         &lt;char&gt;  &lt;char&gt; &lt;char&gt;          &lt;num&gt;          &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: value_to_na     104    104            6.3             NA</span></span>
<span><span class="co">#&gt; 2: value_to_na     125    125            6.7             NA</span></span>
<span><span class="co">#&gt; 3: value_to_na      67     67            5.6             NA</span></span>
<span><span class="co">#&gt; 4: value_to_na      80     80            5.7             NA</span></span>
<span><span class="co">#&gt; 5: value_to_na      96     96            5.7             NA</span></span></code></pre></div>
<p>In this comparison, <code>iris</code> and <code>iris_var1</code> are
two data frames that differ in the values of the
<code>Sepal.Length</code> column. The output shows the values of the
variable <code>Sepal.Length</code> in iris (<code>dfx</code>) as
<code>Sepal.Length.x</code> and in iris_var1 (<code>dfy</code>) as
<code>Sepal.Length.y</code>. The column <code>diff</code> identifies the
type of differences between the two values. In this case, in
<code>iris_var1</code>, the 5 non-matching values are <code>NA</code>.
Therefore, the column <code>diff</code> shows
<code>value_to_na</code>.</p>
<p>This output can be manipulated by the user to explore the differences
in more detail.</p>
</div>
<div class="section level2">
<h2 id="example-2-multiple-variables-with-differences-">Example 2: multiple variables with differences.<a class="anchor" aria-label="anchor" href="#example-2-multiple-variables-with-differences-"></a>
</h2>
<p>Here is a case where the two data frames differ in multiple
variables:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_diff_values.html">extract_diff_values</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">iris_var2</span>, output <span class="op">=</span> <span class="st">"simple"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">output</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ Sepal.Length:Classes 'data.table' and 'data.frame':   150 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;  $ Sepal.Width :Classes 'data.table' and 'data.frame':   137 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;  $ Petal.Length:Classes 'data.table' and 'data.frame':   148 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;  $ Petal.Width :Classes 'data.table' and 'data.frame':   136 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;  $ Species     :Classes 'data.table' and 'data.frame':   94 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt;</span></span></code></pre></div>
<p>This time, the object returned is a list of <code>data.table</code>s,
one for each variable that differs between the two data frames. If we
look into one single variable, we can see that there are also different
types of differences, in this case <code>value_to_na</code> and
<code>change_in_value</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span><span class="op">$</span><span class="va">Sepal.Width</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">diff</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 Ã— 2</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   diff [2]</span></span></span>
<span><span class="co">#&gt;   diff                n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> change_in_value   132</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> value_to_na         5</span></span></code></pre></div>
<p>Letâ€™s assume that I want to focus on missing values in the variable
<code>Sepal.Width</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span><span class="op">$</span><span class="va">Sepal.Width</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">diff</span> <span class="op">==</span> <span class="st">"value_to_na"</span><span class="op">)</span></span>
<span><span class="co">#&gt;           diff indexes     rn Sepal.Width.x Sepal.Width.y</span></span>
<span><span class="co">#&gt;         &lt;char&gt;  &lt;char&gt; &lt;char&gt;         &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: value_to_na     114    114           2.5           NaN</span></span>
<span><span class="co">#&gt; 2: value_to_na      23     23           3.6           NaN</span></span>
<span><span class="co">#&gt; 3: value_to_na      58     58           2.4           NaN</span></span>
<span><span class="co">#&gt; 4: value_to_na      78     78           3.0           NaN</span></span>
<span><span class="co">#&gt; 5: value_to_na      79     79           2.9           NaN</span></span></code></pre></div>
<p>The user can use the indexes to extract the observations in
<code>dfy</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indexes</span> <span class="op">&lt;-</span> <span class="va">output</span><span class="op">$</span><span class="va">Sepal.Width</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">diff</span> <span class="op">==</span> <span class="st">"value_to_na"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">indexes</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>indexes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">indexes</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">iris_var2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">indexes</span><span class="op">$</span><span class="va">indexes</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span></span>
<span><span class="co">#&gt;           &lt;num&gt;       &lt;num&gt;        &lt;num&gt;       &lt;num&gt;     &lt;fctr&gt;</span></span>
<span><span class="co">#&gt; 1:     6.845388         NaN          5.7         2.1  virginica</span></span>
<span><span class="co">#&gt; 2:     6.050488         NaN          5.1         1.6 versicolor</span></span>
<span><span class="co">#&gt; 3:     6.395608         NaN          4.2         1.2 versicolor</span></span>
<span><span class="co">#&gt; 4:     5.291679         NaN          3.3         1.0 versicolor</span></span>
<span><span class="co">#&gt; 5:     7.202346         NaN          4.7         1.6 versicolor</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-3-a-larger-dataset">Example 3: a larger dataset<a class="anchor" aria-label="anchor" href="#example-3-a-larger-dataset"></a>
</h2>
<p>In this example we will look at a more complex case, using the
publicly available <code>gapminder</code> dataset. We will compare the
<code>gapminder</code> dataset with a modified version of it,
<code>gapminder_var1</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_var1</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>lifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span>, <span class="cn">NA</span>, <span class="va">lifeExp</span><span class="op">)</span>, <span class="co"># NAs in lifeExp for one year</span></span>
<span>         pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">country</span> <span class="op">==</span> <span class="st">'Italy'</span><span class="op">&amp;</span> <span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">1992</span>, <span class="va">pop</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>, <span class="va">pop</span><span class="op">)</span>, <span class="co"># Errors in pop</span></span>
<span>         gdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">country</span> <span class="op">==</span> <span class="st">'Colombia'</span>, <span class="va">gdpPercap</span><span class="op">/</span><span class="fl">10</span>, <span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="co"># Errors in gdpPercap</span></span></code></pre></div>
<p>If we</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Giorgia Cecchinato.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
